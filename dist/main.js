!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s={getRandomFloat:(t,e)=>Math.random()*(e-t)+t,getRandomInt:(t,e)=>Math.floor(Math.random()*(e-t)+t),distanceBetween:(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),angleBetween:(t,e)=>Math.atan2(e.x-t.x,e.y-t.y),isWithinBounds:(t,e,i=0)=>e.x-i>=0&&e.x+i<=t.canvas.width&&e.y-i>=0&&e.y+i<=t.canvas.height,isColliding(t,e,i=0){return this.distanceBetween(t,e)-i<t.radius+e.radius},getMousePos(t){const e=t.currentTarget;let i,s;if("BODY"===e.tagName){var n=e.scrollLeft||document.documentElement.scrollLeft,a=e.scrollTop||document.documentElement.scrollTop;i=t.clientX-(e.offsetLeft-n+e.clientLeft),s=t.clientY-(e.offsetTop-a+e.clientTop)}else i=t.clientX-(e.offsetLeft-e.scrollLeft+e.clientLeft),s=t.clientY-(e.offsetTop-e.scrollTop+e.clientTop);return{x:i,y:s}}};class n{constructor(t){this.withinBounds=!1,this.canCollide=!1,this.ctx=t.ctx,this.faces=t.faces,this.face=t.faces.happy,this.radius=t.radius,this.x=t.x,this.y=t.y,this.route=[],this.speed=t.speed||1,this.vector=this.randomVector(),this.color=t.color,this.isLanding=!1}randomVector(){const t=s.getRandomFloat(0,2*Math.PI);var e=Math.cos(t)*this.speed,i=Math.sin(t)*this.speed;const n=this.ctx.canvas.width/2,a=this.ctx.canvas.height/2;return{vx:e=this.x>=n?-1*Math.abs(e):Math.abs(e),vy:i=this.y>=a?-1*Math.abs(i):Math.abs(i)}}draw(){if(this.ctx.strokeStyle=this.color,this.ctx.fillStyle=this.color,this.route.length>=2){this.ctx.lineWidth=Math.floor(this.radius/8.3);for(var t=1;t<this.route.length;t+=10){let e=this.route[t-5]||this,i=this.route[t];this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(i.x,i.y),this.ctx.stroke()}}this.canCollide||(this.ctx.strokeStyle="grey"),this.ctx.lineWidth=3,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke(),this.ctx.drawImage(this.face,this.x-(this.radius-1.5),this.y-(this.radius-1.5),2*this.radius-3,2*this.radius-3)}wayOff(){return this.x<-55||this.x>this.ctx.canvas.width+55||(this.y<-55||this.y>this.ctx.canvas.height+55||void 0)}bounce(){this.withinBounds&&((this.x-this.radius<=0||this.x+this.radius>=this.ctx.canvas.width)&&(this.vector.vx*=-1),(this.y-this.radius<=0||this.y+this.radius>=this.ctx.canvas.height)&&(this.vector.vy*=-1))}move(){this.isLanding||this.canCollide||(this.canCollide=s.isWithinBounds(this.ctx,this,0)),this.withinBounds||(this.withinBounds=s.isWithinBounds(this.ctx,this,this.radius)),this.route.length>=2?(2===this.route.length&&this.getPassiveVector(),this.activeMove()):this.passiveMove(),this.landing&&this.land()}activeMove(){this.route.splice(0,1);const{x:t,y:e}=this.route[0];this.x=t,this.y=e}getPassiveVector(){const t=this.route[1].x,e=this.route[0].x,i=this.route[0].y,s=this.route[1].y;this.vector={vx:t-e,vy:s-i}}passiveMove(){this.bounce(),this.x+=this.vector.vx,this.y+=this.vector.vy}land(){this.route.length<=5&&(this.vector={vx:0,vy:0}),this.canCollide=!1,this.radius*=.98}collidesWith(t){if(s.isColliding(this,t,0)){if(!(t instanceof n))return!0;if(this.canCollide&&t.canCollide)return!0}return!1}nearlyCollidesWith(t){return s.isColliding(this,t,30)}inVicinityOf(t){return s.isColliding(this,t,100)}changeFace(t){this.face!==t&&(this.face=t)}}class a{constructor(t){this.radius=t.radius,this.x=t.x,this.y=t.y,this.color=t.color}draw(t){t.strokeStyle=this.color,t.lineWidth=4,t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.arc(this.x,this.y,this.radius-10,0,2*Math.PI),t.arc(this.x,this.y,this.radius-20,0,2*Math.PI),t.stroke()}}var o,h,c,r,l,d,u,f,v,g,x,y,m,p,w,M,b=0,T=Date.now(),k=!1,L=E,E=15,A=!1;const B=["blue","red"];function C(){if(o){const e=Date.now()-T;if(T=Date.now(),(b+=e)>=L){b=0,h.clearRect(0,0,h.canvas.width,h.canvas.height),r.forEach(t=>t.draw(h));for(var t=0;t<v.length;t++)S(t),v[t]&&(v[t].move(),v[t].draw(),v[t].wayOff()&&(v.splice(t,1),console.log("deleted wayOff emoji"),v.push(F())));for(;v.length<Math.floor(l/5);)v.push(F());!function(){(function(){const t=h.canvas.height;h.fillStyle="grey",h.strokeStyle="grey",h.fillRect(5,t-25,10,20),h.fillRect(20,t-25,10,20),h.beginPath(),h.moveTo(42,t-6),h.lineTo(42,t-23),h.lineTo(57,t-14),h.fill(),h.rect(65,t-25,25,20),h.font="bold 10px Arial",h.lineWidth=2,h.stroke(),h.fillText("SLO",67,t-12)})(),h.textAlign="center",h.fillStyle="white",h.font="20px Arial",h.fillText(l,h.canvas.width/2,h.canvas.height-10),h.globalAlpha=.5,h.textAlign="left",h.font="20px Arial",l<=2&&h.fillText("click and drag an emoji to draw its path home...",20,40);l>=2&&l<=4&&h.fillText("you can use SPACEBAR instead of LMB if you prefer...",20,60);l>=3&&l<=4&&h.fillText("they don't mind...",20,80);l>=4&&l<=5&&h.fillText("just don't let them collide...",20,100);l>=5&&l<=6&&h.fillText("emojis HATE collisions...",20,120);l>=6&&l<=6&&h.fillText("also they'll die",245,120);l>=7&&l<=8&&h.fillText("bouncing off walls is cool though...",20,140);l>=8&&l<=8&&h.fillText("(not a recommended strategy)...",20,160);l>=9&&l<=10&&h.fillText("ENJOY :]",20,190);u&&(h.textAlign="center",h.fillStyle="black",h.fillRect(0,0,h.canvas.width,h.canvas.height),h.globalAlpha=1,h.fillStyle="purple",h.font="130px Arial",h.fillText("GAME",h.canvas.width/2,h.canvas.height/2-10),h.fillText("OVER",h.canvas.width/2,h.canvas.height/2+90),h.fillStyle="white",h.font="20px Arial",h.fillText("click anywhere to play again",h.canvas.width/2,h.canvas.height-40));h.globalAlpha=1}()}}c=requestAnimationFrame(C)}function j(){u=!1,h.canvas.removeEventListener("mousedown",j),h.canvas.addEventListener("mousedown",V),document.body.onkeydown=(t=>{!1!==A||32!==t.keyCode&&" "!==t.key||(A=!0,V(t))}),h.canvas.addEventListener("mousedown",O),h.canvas.addEventListener("mousedown",R),h.canvas.addEventListener("mousedown",I),h.canvas.addEventListener("mouseup",()=>g=null),document.body.onkeyup=(t=>{32!==t.keyCode&&" "!==t.key||(A=!1,g=null)}),h.canvas.addEventListener("mousemove",t=>{d=s.getMousePos(t)}),h.canvas.addEventListener("mousemove",()=>q(d)),(v=[]).push(F()),v.push(F()),r=function(t){const e=[];for(var i=0;i<B.length;i++){const t=s.getRandomInt(100,h.canvas.width-100),n=s.getRandomInt(100,h.canvas.height-100);e.push(new a({radius:25,color:B[i],x:t,y:n}))}return e}(),l=0,L=E}function P(){k&&(c=requestAnimationFrame(C),k=!1)}function I(){d.x<30&&d.y>h.canvas.height-25&&(k||(cancelAnimationFrame(c),k=!0))}function O(t){d.x>30&&d.x<60&&d.y>h.canvas.height-25&&(L=E,P())}function R(t){d.x>60&&d.x<90&&d.y>h.canvas.height-25&&(L+=L,P())}function S(t){if(v[t].route.length>=2){for(var e=0;e<r.length;e++)if(!v[t].landing&&v[t].color===r[e].color&&v[t].collidesWith(r[e]))return console.log("emoji landing"),v[t].landing=!0,v[t].route=D(v[t],r[e]),void(++l<10&&v.push(F()))}else v[t].radius<=5&&v.splice(t,1);for(var i=0;i<v.length;i++)if(t!==i&&v[t]&&(v[t].nearlyCollidesWith(v[i])?v[t].changeFace(v[t].faces.worried):v[t].changeFace(v[t].faces.happy),v[t].collidesWith(v[i])))return u=!0,h.canvas.addEventListener("mousedown",j),h.canvas.removeEventListener("mousedown",V),h.canvas.removeEventListener("mouseup",()=>g=null),h.canvas.removeEventListener("mousemove",q),v[t].changeFace(v[t].faces.dead),v[t].vector={vx:0,vy:0},void(v[t].route=[])}function W(t){const e=[[[-55,-5],[-55,t.canvas.height+55]],[[-5,t.canvas.width-5],[-55,-5]],[[t.canvas.width+5,t.canvas.width+55],[-55,t.canvas.height+55]],[[-5,t.canvas.width-5],[t.canvas.height+5,t.canvas.height+55]]],i=e[Math.floor(Math.random()*e.length)],[n,a]=i.map(t=>s.getRandomInt(...t));return{x:n,y:a}}function F(){console.log("spawnEmoji was called");const t=B[Math.floor(Math.random()*B.length)];var e=["regular","regular","big","small"],i=e[Math.floor(Math.random()*e.length)];i=f[i];for(var s=Object.assign({},i,W(h)),a=!0;a;){a=!1;for(var o=0;o<v.length;o++)if(v[o].inVicinityOf(s)){s=Object.assign({},i,W(h)),a=!0;break}}let c=Object.assign({},{ctx:h},{color:t},s);return new n(c)}function V(t){void 0===d&&(d=s.getMousePos(t)),console.log(`mousedown @ ${d.x}, ${d.y}`),v.forEach(t=>{Math.abs(d.x-t.x)<=t.radius&&Math.abs(d.y-t.y)<=t.radius&&(t.route=[],g=t)})}function D(t,e){const i=s.distanceBetween(t,e),n=s.angleBetween(t,e),a=[];for(var o=0;o<i;o+=1){let e=t.x+Math.sin(n)*o,i=t.y+Math.cos(n)*o;a.push({x:e,y:i})}return a}function q(t){if(g){var e=g.route[g.route.length-1]||g;const n=s.distanceBetween(e,t),a=s.angleBetween(e,t);for(var i=0;i<n;i+=g.speed){let t=e.x+Math.sin(a)*i,n=e.y+Math.cos(a)*i,o=g.route[g.route.length-1]||e,h={x:t,y:n};s.distanceBetween(o,h)>0&&g.route.push(h)}}}c=requestAnimationFrame(C),document.addEventListener("DOMContentLoaded",()=>{x=new Image,p=new Image,w=new Image,M=new Image,y=new Image,m=new Image,x.src="../emojis/eyeglasses-black-face-emoticon.png",p.src="../emojis/worried-black-face.png",w.src="../emojis/astonished-black-emoticon-face.png",M.src="../emojis/flashed-black-emoticon-face.png",y.src="../emojis/moustache-male-black-emoticon-face.png",m.src="../emojis/laughing-emoticon-black-happy-face.png";var t=function(t){var e=0;const i=()=>{if(++e!==t)return i;{const t=document.getElementById("contentContainer");h=t.getContext("2d"),j(),o=!0}};return i}(6);x.onload=(()=>t=t()),p.onload=(()=>t=t()),w.onload=(()=>t=t()),M.onload=(()=>t=t()),y.onload=(()=>t=t()),m.onload=(()=>t=t()),f={regular:{faces:{happy:x,worried:p,dead:w,shocked:M},radius:25,speed:1},big:{faces:{happy:y,worried:p,dead:w,shocked:M},radius:30,speed:.65},small:{faces:{happy:m,worried:p,dead:w,shocked:M},radius:20,speed:1.5}}})}]);